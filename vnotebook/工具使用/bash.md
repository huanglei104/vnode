[参考教程](https://zhuanlan.zhihu.com/p/264346586 "知乎")

### 变量
    变量不用被定义就可以直接使用，默认的值是空
    给变量赋值：NAME="ABC" （等号两边不能有空格）
    定义一个局部变量： local NAME="ABC" （local只能在函数内使用，局部变量也只能在函数内访问）
    定义一个只读变量：readonly NAME="ABC" （只读变量的值不能被修改，包括unset）
    访问变量的值：$NAME 或 ${NAME}
    删除变量：   unset NAME

### 变量状态赋值
    ${VAR:-string} 如果VAR变量为空则返回string
    ${VAR:+string} 如果VAR变量不为空则返回string
    ${VAR:=string} 如果VAR变量为空则重新赋值VAR变量值为string
    ${VAR:?string} 如果VAR变量为空则将string输出到stderr    


### 字符串
    单引号中的字符串会原样输出， 双引号中支持变量
    字符串拼接：多个字符串连写在一起，中间不能有其他符号，包括空格
    获取字符串长度：${#name}
    获取子串：${name:start:len} （不写start默认从0开始）

### 数组
    bash只支持一维数组
    定义一个数组：array=(var1 var2 var3 var4 ...) （数组的值放在小括号中，多个值用空格分隔）
    单独给数组的元素赋值：array[2]="abc" （下标不需要连续）
    获取数组元素的值：${array[index]}
    获取数组所有元素的值：${array[@]} （@也可换成*，空值不会返回）
    获取数组元素的个数：${#{array[@]}} （@也可换成*，空值元素也会计算）
    获取数组单个元素长度：${#array_name[index]}

### 参数传递
    $0：执行的文件名
    $n：第n个参数
    $#：参数个数
    $*：所有参数（字符串形式）
    $@：所有参数（数组形式）
    $$：进程号
    $!：最后一个后台进程号
    $?：上一条命令的退出状态（0表示没有错误，其他值表示有错误）

### 算术运算
    使用let关键字：let a=1+2（如果没有let，则bash会当成普通赋值）
    $[]语法：$[1+3]（括号内部可以有任意空格，变量前不用加$）
    $(())语法：$(( 3 * 3 ))（括号内部可以有任意空格，变量前不用加$）
    外部命令expr： expr 6 / 3 （数字与符号间要有空格）

### 数字关系运算
    -eq：相等
    -ne：不等
    -gt：大于
    -lt：小于
    -ge 大于等于
    -le 小于等于

### 字符串关系运算符
    =：相等
    !=：不等
    -z：长度为0
    -n：长度是否不为0

### 文件关系运算符
    -b：是否是块设备
    -c：是否是字符设备
    -d：是否是目录
    -f：是否是普通文件
    -u：是否设置了SUID位
    -g：是否设置了SGID位
    -k：是否设置了sticky位
    -p：是否是管道文件
    -r：是否可读
    -w：是否可写
    -x：是否可执行
    -s：是否为空
    -e：是否存在

**以上3种关系运算都要写在[]中，并且括号两边有空格，或者用test关键字**
**数字关系运算可以写在(())中（两边要有空格），可以直接使用标准的关系运算符，<、>、==等等**
**字符串关系运算可以写在[[]]中（两边要有空格），可以直接使用标准的关系运算符，<、>、==等等**

### 布尔运算
    ！：非
    -o/||：或
    -a/&&：与

### 命令替换
    使用``或$()

### 输出
    echo：自动添加换行
    printf：printf "格式化字符串" 参数 （与C语言printf类似）

### 流程控制
```bash
    #if
    if  [ $a -gt $b]; then
        echo 'hello'
    fi

    #if else
    if  [ $a -gt $b]; then
        echo 'hello'
    else
        echo 'world'
    fi

    #if elif
    if  [ $a -gt $b]; then
        echo 'hello'
    elif [ $a -gt $c ];then
        echo 'world'
    else
        echo 'haha'
    fi

    #for第一种形式，list是以空格分隔的多个值
    for i in list
    do
        echo $i
    done

    #for第二种形式，类似C语言中的for
    for ((i=0; i<10; i++))
    do
        echo $i
    done

    #while
    while test $a
    do
        echo 'hello'
    done

    #while无限循环
    while  :
    do
        echo 'aaa'
    done

    #until 条件满足时终止循环，与while相反
    until test $a -eq 10
    do
        echo $i
    done

    #case 语句后添加;;相当于C语言中的break ，添加;&相当于C语言中没有break，添加;;&会继续往后匹配
    case $i in
        1)
            echo 'aaa';;
        2)
            echo 'bbb';;
esac

```
**for while until 都可使用break和continue，含义与C语言中一样**

### 函数
    定义一个函数：function foo(){} （function关键字可以省略，没有参数列表，在函数内部通过$n取得参数）
    调用：直接通过函数名调用，没有括号，参数写在函数名后面，用空格分隔
    返回值：通过return返回，只能是[0-255]，没有return语句默认是最后一条语句的执行状态


### 内置命令
    read：从输入中读取一行存储在一个变量中，如果没有指定变量名，则默认变量是REPLY
                 -a array： 将读取的一行当成一个数组
                 -d delim：指定行分隔符，默认是换行符
                -p prompt：给一个输入提示
                -t timeout：给输入设置一个时间
                -u fd：从指定文件描述符读取

### BASH选项
    -a：默认导出变量
    -b：后台任务结束立即报告
    -e：只要脚本有错误就会终止执行（对管道命令不生效，因为管道命令是以最后一条命令的返回值作为返回值）
    -h：搜索命令时，把它们记录在bash表中（默认打开）
    -m：启用作业控制
    -n：读取命令但不执行，可以用来检查脚本是否有语法错误（交互式shell会忽略该选项）
    -o：通过选项名称来设置对应选项
    -u：如果变量没有设置则报错
    -v：打印读取的每一行
    -x：以调试模式执行脚本
    -B：启用大括号扩展（默认打开）
    -H：打开'!'风格的历史替换（交互式shell中默认打开）
    -i：交互模式
    bash的选项可以在bash开始时指定，也可以在运行过程中通过set命令来设置（set  -opt）或取消（set +opt）
    -i 选项不可以在bash运行过程中通过set命令来改变
    set命令不加任何参数，则显示所有有环境变量和函数
    变量$-保存了被设置的选项


### 相关术语
* 控制运算符 ：|| ，&&， &， ；， ；；， |， |&， （， ）和换行符
* 元字符：没有引用时，能够分隔开单词的字符，包括：|， &， ；， （， ）， <， > 
* 运算符：包括控制运算符和重定向运算符。至少包括一个未被引用的元字符

引用：把特殊字符变成普通字符，bash有三种引用，单引号，双引号，转义字符\
转义字符：把下一个特殊字符变成普通字符，如果下一个字符不是普通字符，则\相当于不存在
单引号：把单引号内的所有字符都变成普通字符
双引号：把双引号内的所的的字符都变成普通字符，除了$，\`，\，并且只有当下一个字符是$，\`，\"，\\时，\才是引用，否则是普通字符

形如$'string'的单词会按照ANSI C的标准进行扩展，比如 \n表示换行

对变量的值的两种方法： 1. $var_name            2. ${var_name}

|& 相当于 2>&1 |



查找子字符串   使用expr index 
 
块注释： ：<<str 注释内容
 
str

